/*
 *  Bootstrap TouchSpin - v3.0.1
 *  A mobile and touch friendly input spinner component for Bootstrap 3.
 *  http://www.virtuosoft.eu/code/bootstrap-touchspin/
 *
 *  Made by István Ujj-Mészáros
 *  Under Apache License v2.0 License
 */
!function(t){"use strict";function n(t,n){return t+".touchspin_"+n}function o(o,s){return t.map(o,function(t){return n(t,s)})}var s=0;t.fn.TouchSpin=function(n){if("destroy"!==n){var e={min:0,max:100,initval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalbuttons:!1,verticalupclass:"glyphicon glyphicon-chevron-up",verticaldownclass:"glyphicon glyphicon-chevron-down",prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0,buttondown_class:"btn btn-default",buttonup_class:"btn btn-default",buttondown_txt:"-",buttonup_txt:"+"},i={min:"min",max:"max",initval:"init-val",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalbuttons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",forcestepdivisibility:"force-step-divisibility",stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class",buttondown_txt:"button-down-txt",buttonup_txt:"button-up-txt"};return this.each(function(){function a(){""!==M.initval&&""===I.val()&&I.val(M.initval)}function p(t){c(t),w();var n=F.input.val();""!==n&&F.input.val(Number(n.replace(/\./g,"").replace(/,/g,".")).toFixed(M.decimals).toString().replace(".",",").replace(/\B(?=(\d{3})+(?!\d),)/g,"."))}function u(){M=t.extend({},e,O,r(),n)}function r(){var n={};return t.each(i,function(t,o){var s="bts-"+o;I.is("[data-"+s+"]")&&(n[t]=I.data(s))}),n}function c(n){M=t.extend({},M,n)}function l(){var t=I.val(),n=I.parent();""!==t&&(t=Number(t.replace(/\./g,"").replace(/,/g,".")).toFixed(M.decimals).toString().replace(".",",").replace(/\B(?=(\d{3})+(?!\d),)/g,".")),I.data("initvalue",t).val(t),I.addClass("form-control"),n.hasClass("input-group")?d(n):f()}function d(n){n.addClass("bootstrap-touchspin");var o,s,e=I.prev(),i=I.next(),a='<span class="input-group-addon bootstrap-touchspin-prefix">'+M.prefix+"</span>",p='<span class="input-group-addon bootstrap-touchspin-postfix">'+M.postfix+"</span>";e.hasClass("input-group-btn")?(o='<button class="'+M.buttondown_class+' bootstrap-touchspin-down" type="button">'+M.buttondown_txt+"</button>",e.append(o)):(o='<span class="input-group-btn"><button class="'+M.buttondown_class+' bootstrap-touchspin-down" type="button">'+M.buttondown_txt+"</button></span>",t(o).insertBefore(I)),i.hasClass("input-group-btn")?(s='<button class="'+M.buttonup_class+' bootstrap-touchspin-up" type="button">'+M.buttonup_txt+"</button>",i.prepend(s)):(s='<span class="input-group-btn"><button class="'+M.buttonup_class+' bootstrap-touchspin-up" type="button">'+M.buttonup_txt+"</button></span>",t(s).insertAfter(I)),t(a).insertBefore(I),t(p).insertAfter(I),N=n}function f(){var n;n=M.verticalbuttons?'<div class="input-group bootstrap-touchspin"><span class="input-group-addon bootstrap-touchspin-prefix">'+M.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+M.postfix+'</span><span class="input-group-btn-vertical"><button class="'+M.buttondown_class+' bootstrap-touchspin-up" type="button"><i class="'+M.verticalupclass+'"></i></button><button class="'+M.buttonup_class+' bootstrap-touchspin-down" type="button"><i class="'+M.verticaldownclass+'"></i></button></span></div>':'<div class="input-group bootstrap-touchspin"><span class="input-group-btn"><button class="'+M.buttondown_class+' bootstrap-touchspin-down" type="button">'+M.buttondown_txt+'</button></span><span class="input-group-addon bootstrap-touchspin-prefix">'+M.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+M.postfix+'</span><span class="input-group-btn"><button class="'+M.buttonup_class+' bootstrap-touchspin-up" type="button">'+M.buttonup_txt+"</button></span></div>",N=t(n).insertBefore(I),t(".bootstrap-touchspin-prefix",N).after(I),I.hasClass("input-sm")?N.addClass("input-group-sm"):I.hasClass("input-lg")&&N.addClass("input-group-lg")}function b(){F={down:t(".bootstrap-touchspin-down",N),up:t(".bootstrap-touchspin-up",N),input:t("input",N),prefix:t(".bootstrap-touchspin-prefix",N).addClass(M.prefix_extraclass),postfix:t(".bootstrap-touchspin-postfix",N).addClass(M.postfix_extraclass)}}function h(){""===M.prefix&&F.prefix.hide(),""===M.postfix&&F.postfix.hide()}function v(){I.on("keydown",function(t){var n=t.keyCode||t.which;38===n?("up"!==z&&(_(),k()),t.preventDefault()):40===n&&("down"!==z&&(C(),D()),t.preventDefault())}),I.on("keyup",function(t){var n=t.keyCode||t.which;38===n?S():40===n&&S()}),I.on("blur",function(){w()}),F.down.on("keydown",function(t){var n=t.keyCode||t.which;32!==n&&13!==n||("down"!==z&&(C(),D()),t.preventDefault())}),F.down.on("keyup",function(t){var n=t.keyCode||t.which;32!==n&&13!==n||S()}),F.up.on("keydown",function(t){var n=t.keyCode||t.which;32!==n&&13!==n||("up"!==z&&(_(),k()),t.preventDefault())}),F.up.on("keyup",function(t){var n=t.keyCode||t.which;32!==n&&13!==n||S()}),F.down.on("mousedown.touchspin",function(t){F.down.off("touchstart.touchspin"),I.is(":disabled")||(C(),D(),t.preventDefault(),t.stopPropagation())}),F.down.on("touchstart.touchspin",function(t){F.down.off("mousedown.touchspin"),I.is(":disabled")||(C(),D(),t.preventDefault(),t.stopPropagation())}),F.up.on("mousedown.touchspin",function(t){F.up.off("touchstart.touchspin"),I.is(":disabled")||(_(),k(),t.preventDefault(),t.stopPropagation())}),F.up.on("touchstart.touchspin",function(t){F.up.off("mousedown.touchspin"),I.is(":disabled")||(_(),k(),t.preventDefault(),t.stopPropagation())}),F.up.on("mouseout touchleave touchend touchcancel",function(t){z&&(t.stopPropagation(),S())}),F.down.on("mouseout touchleave touchend touchcancel",function(t){z&&(t.stopPropagation(),S())}),F.down.on("mousemove touchmove",function(t){z&&(t.stopPropagation(),t.preventDefault())}),F.up.on("mousemove touchmove",function(t){z&&(t.stopPropagation(),t.preventDefault())}),t(document).on(o(["mouseup","touchend","touchcancel"],s).join(" "),function(t){z&&(t.preventDefault(),S())}),t(document).on(o(["mousemove","touchmove","scroll","scrollstart"],s).join(" "),function(t){z&&(t.preventDefault(),S())}),I.on("mousewheel DOMMouseScroll",function(t){if(M.mousewheel&&I.is(":focus")){var n=t.originalEvent.wheelDelta||-t.originalEvent.deltaY||-t.originalEvent.detail;t.stopPropagation(),t.preventDefault(),n<0?C():_()}})}function g(){I.on("touchspin.uponce",function(){S(),_()}),I.on("touchspin.downonce",function(){S(),C()}),I.on("touchspin.startupspin",function(){k()}),I.on("touchspin.startdownspin",function(){D()}),I.on("touchspin.stopspin",function(){S()}),I.on("touchspin.updatesettings",function(t,n){p(n)})}function x(t){switch(M.forcestepdivisibility){case"round":return(Math.round(t/M.step)*M.step).toFixed(M.decimals);case"floor":return(Math.floor(t/M.step)*M.step).toFixed(M.decimals);case"ceil":return(Math.ceil(t/M.step)*M.step).toFixed(M.decimals);default:return t}}function m(t){if(/\d+\.?\d*e[\+\-]*\d+/i.test(t)){var n=String(t).toLowerCase().split("e"),o=n.pop(),s=Math.abs(o),e=o/s,i=n[0].split(".");if(-1===e)t="0."+new Array(s).join("0")+i.join("");else{var a=i[1];a&&(s-=a.length),t=i.join("")+new Array(s+1).join("0")}}return t}function w(){var t,n,o;""!==(t=I.val())&&(M.decimals>0&&"."===t||("none"==M.forcestepdivisibility&&t.indexOf(",")>-1&&t.length-t.indexOf(",")>M.decimals+1&&(t=t.substring(0,t.indexOf(",")+M.decimals+1)),t=t.replace(/\./g,"").replace(/,/g,"."),n=parseFloat(t),isNaN(n)&&(n=0),o=n,n.toString()!==t&&(o=n),n<M.min&&(o=M.min),n>M.max&&(o=M.max),"none"!=M.forcestepdivisibility?(o=x(o),Number(t).toString()!==o.toString()&&(I.val(o.toString().replace(".",",").replace(/\B(?=(\d{3})+(?!\d),)/g,".")),I.trigger("change"))):(o=m(o),I.val(o.toString().replace(".",",").replace(/\B(?=(\d{3})+(?!\d),)/g,".")),I.trigger("change"))))}function y(){if(M.booster){var t=Math.pow(2,Math.floor(E/M.boostat))*M.step;return M.maxboostedstep&&t>M.maxboostedstep&&(t=M.maxboostedstep,B=Math.round(B/t)*t),Math.max(M.step,t)}return M.step}function _(){w(),B=parseFloat(F.input.val().replace(/\./g,"").replace(",",".")),isNaN(B)&&(B=0);var t=B,n=y();(B+=n)>M.max&&(B=M.max,I.trigger("touchspin.on.max"),S()),F.input.val(Number(B).toFixed(M.decimals).toString().replace(".",",").replace(/\B(?=(\d{3})+(?!\d),)/g,".")),t!==B&&I.trigger("change")}function C(){w(),B=parseFloat(F.input.val().replace(/\./g,"").replace(",",".")),isNaN(B)&&(B=0);var t=B,n=y();(B-=n)<M.min&&(B=M.min,I.trigger("touchspin.on.min"),S()),F.input.val(Number(B).toFixed(M.decimals).toString().replace(".",",").replace(/\B(?=(\d{3})+(?!\d),)/g,".")),t!==B&&I.trigger("change")}function D(){S(),E=0,z="down",I.trigger("touchspin.on.startspin"),I.trigger("touchspin.on.startdownspin"),T=setTimeout(function(){P=setInterval(function(){E++,C()},M.stepinterval)},M.stepintervaldelay)}function k(){S(),E=0,z="up",I.trigger("touchspin.on.startspin"),I.trigger("touchspin.on.startupspin"),A=setTimeout(function(){j=setInterval(function(){E++,_()},M.stepinterval)},M.stepintervaldelay)}function S(){switch(clearTimeout(T),clearTimeout(A),clearInterval(P),clearInterval(j),z){case"up":I.trigger("touchspin.on.stopupspin"),I.trigger("touchspin.on.stopspin");break;case"down":I.trigger("touchspin.on.stopdownspin"),I.trigger("touchspin.on.stopspin")}E=0,z=!1}var M,N,F,B,P,j,T,A,I=t(this),O=I.data(),E=0,z=!1;!function(){I.data("alreadyinitialized")||(I.data("alreadyinitialized",!0),s+=1,I.data("spinnerid",s),I.is("input")?(u(),a(),w(),l(),b(),h(),v(),g(),F.input.css("display","block")):console.log("Must be an input."))}()})}this.each(function(){var n=t(this).data();t(document).off(o(["mouseup","touchend","touchcancel","mousemove","touchmove","scroll","scrollstart"],n.spinnerid).join(" "))})}}(jQuery);