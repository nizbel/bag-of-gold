function formatar_mil(e){e+="";for(var a=e.split(","),t=a[0],o=a.length>1?","+a[1]:"",r=/(\d+)(\d{3})/;r.test(t);)t=t.replace(r,"$1.$2");return t+o}function calcular_patrimonio_futuro(){$("#div_patr_fut").hasClass("hidden")&&$("#div_patr_fut").removeClass("hidden"),$("#div_patr_fut_comp").hide(),$("#div_patr_fut_comp").hasClass("hidden")&&$("#div_patr_fut_comp").removeClass("hidden"),App.blockUI({target:"#portlet_patrimonio_futuro",iconOnly:!0,overlayColor:"none"});var e=parseFloat($("#aporte_mensal_patr_fut").val().replace(/\./g,"").replace(",",".")),a=parseInt($("#num_meses_patr_fut").val()),t=parseFloat($("#taxa_anual_patr_fut").val().replace(/\./g,"").replace(",",".")),o=Math.pow(1+t/100,1/12)-1,r=e*((1-Math.pow(1+o,a+1))/(1-(1+o))-1);$("#resultado_patrimonio_futuro").attr("data-value",formatar_mil(r.toFixed(2).replace(".",","))),$("#resultado_patrimonio_futuro").counterUp({delay:20,time:400});var p=o*r;$("#resultado_rendimento_futuro").attr("data-value",formatar_mil(p.toFixed(2).replace(".",","))),$("#resultado_rendimento_futuro").counterUp({delay:20,time:400}),App.unblockUI("#portlet_patrimonio_futuro"),setTimeout(function(){var t=(.1*e).toFixed(2);if("0.00"!=t){$("#valor_patr_fut_comp").html(formatar_mil(t.replace(".",",")));var r=e+parseFloat(t),p=r*((1-Math.pow(1+o,a+1))/(1-(1+o))-1);$("#resultado_patrimonio_futuro_comp").attr("data-value",formatar_mil(p.toFixed(2).replace(".",","))),$("#resultado_patrimonio_futuro_comp").counterUp({delay:20,time:400});var _=o*p;$("#resultado_rendimento_futuro_comp").attr("data-value",formatar_mil(_.toFixed(2).replace(".",","))),$("#resultado_rendimento_futuro_comp").counterUp({delay:20,time:400}),$("#div_patr_fut_comp").show()}},500)}function getBaseLog(e,a){return Math.log(a)/Math.log(e)}function calcular_periodo_para_patrimonio(){$("#div_tempo_patr").hasClass("hidden")&&$("#div_tempo_patr").removeClass("hidden"),App.blockUI({target:"#portlet_tempo_patrimonio",iconOnly:!0,overlayColor:"none"});var e=parseFloat($("#aporte_mensal_tempo_patr").val().replace(/\./g,"").replace(",",".")),a=parseFloat($("#patrimonio_tempo_patr").val().replace(/\./g,"").replace(",",".")),t=parseFloat($("#taxa_anual_tempo_patr").val().replace(/\./g,"").replace(",",".")),o=Math.pow(1+t/100,1/12)-1,r=getBaseLog(1+o,-1*(-1+a*(1-(1+o))/e))-1;$("#resultado_tempo_patrimonio").attr("data-value",formatar_mil(r.toFixed(1).replace(".",","))),$("#resultado_tempo_patrimonio").counterUp({delay:20,time:400}),App.unblockUI("#portlet_tempo_patrimonio")}function calcular_periodo_para_rendimento(){$("#div_tempo_rend").hasClass("hidden")&&$("#div_tempo_rend").removeClass("hidden"),App.blockUI({target:"#portlet_tempo_resultado",iconOnly:!0,overlayColor:"none"});var e=parseFloat($("#aporte_mensal_tempo_rend").val().replace(/\./g,"").replace(",",".")),a=parseFloat($("#rendimento_tempo_rend").val().replace(/\./g,"").replace(",",".")),t=parseFloat($("#taxa_anual_tempo_rend").val().replace(/\./g,"").replace(",",".")),o=Math.pow(1+t/100,1/12)-1,r=getBaseLog(1+o,-1*(-1+a/o*(1-(1+o))/e))-1;$("#resultado_tempo_rendimento").attr("data-value",formatar_mil(r.toFixed(1).replace(".",","))),$("#resultado_tempo_rendimento").counterUp({delay:20,time:400}),App.unblockUI("#portlet_tempo_resultado")}function calcular_periodo_para_rendimento_perc(){$("#div_tempo_rend_perc").hasClass("hidden")&&$("#div_tempo_rend_perc").removeClass("hidden"),App.blockUI({target:"#portlet_tempo_resultado_perc",iconOnly:!0,overlayColor:"none"});var e=parseFloat($("#perc_inv_tempo_rend_perc").val().replace(/\./g,"").replace(",",".")),a=parseFloat($("#perc_tempo_rend_perc").val().replace(/\./g,"").replace(",",".")),t=parseFloat($("#taxa_anual_tempo_rend_perc").val().replace(/\./g,"").replace(",",".")),o=Math.pow(1+t/100,1/12)-1,r=getBaseLog(1+o,-1*(-1+a/o*(1-(1+o))/e))-1;$("#resultado_tempo_rendimento_perc").attr("data-value",formatar_mil(r.toFixed(1).replace(".",","))),$("#resultado_tempo_rendimento_perc").counterUp({delay:20,time:400}),App.unblockUI("#portlet_tempo_resultado_perc")}$(document).ready(function(){$("#aporte_mensal_patr_fut").TouchSpin({min:.01,max:1e6,step:.01,decimals:2,maxboostedstep:100,prefix:"R$"}),$("#num_meses_patr_fut").TouchSpin({min:1,max:600,step:1,maxboostedstep:100,postfix:"meses"}),$("#taxa_anual_patr_fut").TouchSpin({min:.01,max:100,step:.01,decimals:2,maxboostedstep:100,postfix:"% ao ano"}),$("#aporte_mensal_tempo_patr").TouchSpin({min:.01,max:1e6,step:.01,decimals:2,maxboostedstep:100,prefix:"R$"}),$("#patrimonio_tempo_patr").TouchSpin({min:.01,max:1e7,step:.01,decimals:2,maxboostedstep:100,prefix:"R$"}),$("#taxa_anual_tempo_patr").TouchSpin({min:.01,max:100,step:.01,decimals:2,maxboostedstep:100,postfix:"% ao ano"}),$("#aporte_mensal_tempo_rend").TouchSpin({min:.01,max:1e6,step:.01,decimals:2,maxboostedstep:100,prefix:"R$"}),$("#rendimento_tempo_rend").TouchSpin({min:.01,max:1e5,step:.01,decimals:2,maxboostedstep:100,prefix:"R$",postfix:"ao mês"}),$("#taxa_anual_tempo_rend").TouchSpin({min:.01,max:100,step:.01,decimals:2,maxboostedstep:100,postfix:"% ao ano"}),$("#perc_inv_tempo_rend_perc").TouchSpin({min:1,max:100,step:1,maxboostedstep:100,postfix:"% do salário"}),$("#perc_tempo_rend_perc").TouchSpin({min:1,max:1e3,step:1,maxboostedstep:100,postfix:"% do salário ao mês"}),$("#taxa_anual_tempo_rend_perc").TouchSpin({min:.01,max:100,step:.01,decimals:2,maxboostedstep:100,postfix:"% ao ano"})});