function formatar(e){for(var a=e.length-1;a>=0;a--)""==e[a]&&e.splice(a,1);for(var t=!0,s=[],a=0;a<e.length;a++){var o=e[a].split(";");if(o.length<7)s.push("\nLinha "+(a+1)+": está com menos campos que o padrão");else if(o.length>7)s.push("\nLinha "+(a+1)+": está com mais campos que o padrão");else{var r=/[\w\d]+\/[\w\d]+/;o[0]=o[0].toUpperCase(),r.test(o[0])||s.push("\nLinha "+(a+1)+": par MOEDA/MOEDA_UTILIZADA está formatado incorretamente"),o[1]=o[1].replace(/[^\d,]/g,""),o[2]=o[2].replace(/[^\d,]/g,""),o[5]=o[5].replace(/[^\d,]/g,"");var i=/,\d{12}\d+/;i.test(o[1])&&s.push("\nLinha "+(a+1)+": quantidade está com mais de 12 casas decimais"),i.test(o[2])&&s.push("\nLinha "+(a+1)+": preço unitário está com mais de 12 casas decimais"),i.test(o[5])&&s.push("\nLinha "+(a+1)+": taxa está com mais de 12 casas decimais"),o[4]=o[4].toUpperCase(),"C"!=o[4]&&"V"!=o[4]&&s.push("\nLinha "+(a+1)+": tipo de operação deve ser C ou V");var n=/\d{1,2}[,\.\-\/]\d{1,2}[,\.\-\/]\d\d\d\d/;n.test(o[3])?o[3]=o[3].replace(/\D/g,"/"):s.push("\nLinha "+(a+1)+": data deve estar no formato DD/MM/YYYY"),o[6]=o[6].toUpperCase(),o[6]!=o[0].split("/")[0]&&o[6]!=o[0].split("/")[1]&&s.push("\nLinha "+(a+1)+": moeda para taxa deve estar no par do primeiro campo"),e[a]=o.join(";")}}return s.length>0&&(t=!1,alert(s)),[t,e.join("\n")]}$(document).ready(function(){$("#form_inserir_op_cripto_lote").submit(function(){var e=!1;try{var a=$("#id_operacoes_lote").val().split("\n"),t=formatar(a);e=!t[0],$("#id_operacoes_lote").val(t[1])}catch(s){e=!0}if(e)return!1})});