function formatar(e){for(s=e.length-1;s>=0;s--)""==e[s]&&e.splice(s,1);for(var a=!0,t=[],s=0;s<e.length;s++){var o=e[s].split(";");if(o.length<7)t.push("\nLinha "+(s+1)+": está com menos campos que o padrão");else if(o.length>7)t.push("\nLinha "+(s+1)+": está com mais campos que o padrão");else{var r=/[\w\d]+\/[\w\d]+/;o[0]=o[0].toUpperCase(),r.test(o[0])||t.push("\nLinha "+(s+1)+": par MOEDA/MOEDA_UTILIZADA está formatado incorretamente"),o[1]=o[1].replace(/[^\d,]/g,""),o[2]=o[2].replace(/[^\d,]/g,""),o[5]=o[5].replace(/[^\d,]/g,"");var i=/,\d{12}\d+/;i.test(o[1])&&t.push("\nLinha "+(s+1)+": quantidade está com mais de 12 casas decimais"),i.test(o[2])&&t.push("\nLinha "+(s+1)+": preço unitário está com mais de 12 casas decimais"),i.test(o[5])&&t.push("\nLinha "+(s+1)+": taxa está com mais de 12 casas decimais"),o[4]=o[4].toUpperCase(),"C"!=o[4]&&"V"!=o[4]&&t.push("\nLinha "+(s+1)+": tipo de operação deve ser C ou V"),/\d{1,2}[,\.\-\/]\d{1,2}[,\.\-\/]\d\d\d\d/.test(o[3])?o[3]=o[3].replace(/\D/g,"/"):t.push("\nLinha "+(s+1)+": data deve estar no formato DD/MM/YYYY"),o[6]=o[6].toUpperCase(),o[6]!=o[0].split("/")[0]&&o[6]!=o[0].split("/")[1]&&t.push("\nLinha "+(s+1)+": moeda para taxa deve estar no par do primeiro campo"),e[s]=o.join(";")}}return t.length>0&&(a=!1,alert(t)),[a,e.join("\n")]}$(document).ready(function(){$("#form_inserir_op_cripto_lote").submit(function(){var e=!1;try{var a=formatar($("#id_operacoes_lote").val().split("\n"));e=!a[0],$("#id_operacoes_lote").val(a[1])}catch(a){e=!0}if(e)return!1})});