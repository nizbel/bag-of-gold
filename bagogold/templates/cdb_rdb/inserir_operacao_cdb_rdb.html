{% extends "base.html" %}

{% block extra_head %}
    {{ form_operacao_cdb.media }}
    {{ form_operacao_rdb.media }}
{% endblock %}

{% block content %}
    <h1>Inserir operação em CDB/RDB</h1>
    <form method="POST" class="post-form form-horizontal">{% csrf_token %}
        <div id="forms">
            <p>
                <label>Tipo:</label>          
                <label class="radio"><input name="tipoRadio" value="cdb" checked="" type="radio">
                    CDB
                </label>
                <label class="radio"><input name="tipoRadio" value="rdb" type="radio">
                    RDB
                </label>
            </p> 
            <div id="cdb" class="radioDiv">
                {{ form_operacao_cdb.as_p }}
                <h2>Divisões <button id="add-another" class="btn btn-primary" type="button">+</button></h2>
                {{ formset_divisao_cdb.management_form }}
                {% for form_divisao in formset_divisao_cdb %}
                    <h3>Divisão {{ forloop.counter }}</h3>
                    {{ form_divisao.as_p }}
                {% endfor %}
            </div>
            <div id="rdb" class="radioDiv" style="display:none;">
                {{ form_operacao_rdb.as_p }}
                <h2>Divisões <button id="add-another" class="btn btn-primary" type="button">+</button></h2>
                {{ formset_divisao_rdb.management_form }}
                {% for form_divisao in formset_divisao_rdb %}
                    <h3>Divisão {{ forloop.counter }}</h3>
                    {{ form_divisao.as_p }}
                {% endfor %}
            </div>
            
        </div>
        <div class="form-actions">
            <button type="submit" name="save" value="cdb" class="btn">Salvar</button>
        </div>
    </form>

<script>
$( "input[name='tipoRadio']" ).click(function(){
	$( "div[class='radioDiv'][id='" + $(this).val() + "']" ).show();
    $( "div[class='radioDiv'][id!='" + $(this).val() + "']" ).hide();
    $( "button[name='save']").val($(this).val());
  });
</script>
{% endblock %}
