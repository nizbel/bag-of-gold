{% extends "base.html" %}

{% block content %}
<h1>Pendência de validação de documento</h1>
<div class="row-fluid">
    <div class="box span12">
        <div class="box-header">
            <h2>Dados do documento</h2>
        </div>
        <div class="box-content">
            <div class="row-fluid">
                <div class="span2"><strong>Empresa:</strong></div>
                <div class="span2">{{pendencia.documento.empresa}}</div>
                <div class="span2"><strong>Protocolo:</strong></div>
                <div class="span2">{{pendencia.documento.protocolo}}</div>
                <div class="span2"><strong>Data Referência:</strong></div>
                <div class="span2">{{pendencia.documento.data_referencia}}</div>
            </div>
            <div class="row-fluid">
                <div class="span2"><strong>Responsável:</strong></div>
                <div class="span2">{{pendencia.responsavel}}</div>
                <div class="span2"><strong>Responsável pela leitura:</strong></div>
                <div class="span2">{{pendencia.documento.investidorleituradocumento}}</div>
                <div class="span2"><strong>Decisão:</strong></div>
                <div class="span2">{{pendencia.decisao}}</div>
            </div>
            <div class="row-fluid">
                <div class="span4"><a href="{% url 'baixar_documento_provento' pendencia.documento.id %}" class="btn btn-warning">Download</a></div>
            </div>
        </div>
    </div>
</div>
{% if pendencia.responsavel.id == request.user.investidor.id %}
<div class="row-fluid">
    <div class="box span12">
        <form method="POST" class="post-form form-horizontal">{% csrf_token %}
            <div id="forms">
                <div class="row-fluid">
                {% for descricao_provento in descricoes_proventos %}
                    <div class="box span6">
                        <div class="box-header">
                            <h2>Provento {{forloop.counter}}</h2>
                        </div>
                        <div class="box-content">
                            <div class="row-fluid">
                                <div class="span1"><strong>Ação:</strong></div>
                                <div class="span2">{{descricao_provento.acao}}</div>
                                <div class="span1"><strong>Tipo:</strong></div>
                                <div class="span2">{{descricao_provento.descricao_tipo_provento}}</div>
                                <div class="span2"><strong>Valor unit.:</strong></div>
                                {% if descricao_provento.tipo_provento != 'A' %}
                                    <div class="span4">R$ {{descricao_provento.valor_unitario}}</div>
                                {% else %}
                                    <div class="span4">{{descricao_provento.valor_unitario}}%</div>
                                {% endif %}
                            </div>
                            <div class="row-fluid">
                                <div class="span2"><strong>Data EX:</strong></div>
                                <div class="span4">{{descricao_provento.data_ex}}</div>
                                <div class="span2"><strong>Pagamento:</strong></div>
                                <div class="span4">{{descricao_provento.data_pagamento}}</div>
                            </div>
                            {% if descricao_provento.tipo_provento == 'A' %}
                                {% for acao_descricao_provento in descricao_provento.acoes_recebidas %}
                                <div class="row-fluid">
                                    <div class="span3"><strong>Ação recebida:</strong></div>
                                    <div class="span3">{{acao_descricao_provento.acao_recebida}}</div>
                                    <div class="span2"><strong>Valor de frações:</strong></div>
                                    <div class="span4">R$ {{acao_descricao_provento.valor_calculo_frac}}</div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span4"><strong>Pagamento de frações:</strong></div>
                                    <div class="span4">{{acao_descricao_provento.data_pagamento_frac}}</div>
                                </div>
                                {% endfor%}
                            {% endif %}
                            <label class="checkbox inline">
                                <div class="checker"><span><input type="checkbox" id="checkbox_alteracao_{{descricao_provento.id}}" value="option"></span></div> É alteração?
                            </label>
                        </div>
                        <div class="box-header">
                            Proventos próximos
                        </div>
                        <div class="box-content">
                            {% for provento_proximo in descricao_provento.proventos_proximos %}
                            <div class="row-fluid">
                                <div class="span1"><strong>Ação:</strong></div>
                                <div class="span2">{{provento_proximo.acao}}</div>
                                <div class="span1"><strong>Tipo:</strong></div>
                                <div class="span2">{{provento_proximo.descricao_tipo_provento}}</div>
                                <div class="span2"><strong>Valor unit.:</strong></div>
                                {% if provento_proximo.tipo_provento != 'A' %}
                                    <div class="span4">R$ {{provento_proximo.valor_unitario}}</div>
                                {% else %}
                                    <div class="span4">{{provento_proximo.valor_unitario}}%</div>
                                {% endif %}
                            </div>
                            <div class="row-fluid">
                                <div class="span2"><strong>Data EX:</strong></div>
                                <div class="span4">{{provento_proximo.data_ex}}</div>
                                <div class="span2"><strong>Pagamento:</strong></div>
                                <div class="span4">{{provento_proximo.data_pagamento}}</div>
                            </div>
                            {% if provento_proximo.tipo_provento == 'A' %}
                                {% for acao_descricao_provento in provento_proximo.acoes_recebidas %}
                                <div class="row-fluid">
                                    <div class="span3"><strong>Ação recebida:</strong></div>
                                    <div class="span3">{{acao_descricao_provento.acao_recebida}}</div>
                                    <div class="span2"><strong>Valor de frações:</strong></div>
                                    <div class="span4">R$ {{acao_descricao_provento.valor_calculo_frac}}</div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span4"><strong>Pagamento de frações:</strong></div>
                                    <div class="span4">{{acao_descricao_provento.data_pagamento_frac}}</div>
                                </div>
                                {% endfor %}
                            {% endif %}
                            <label class="radio">
                                <input name="radioDocumento" value="descricao_{{descricao_provento.id}}_{{provento_proximo.id}}" disabled="disabled" type="radio">
                            Altera este provento
                            </label>
                            {% if forloop.counter < descricao_provento.proventos_proximos|length %}
                            <hr>
                            {% endif %}
                            {% empty %}
                            <div class="row-fluid">
                                <div class="span12"><strong>Não há proventos próximos</strong></div>    
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
                </div>
            </div>
            <div class="form-actions">
                <button type="submit" name="validar" value="1" class="btn">Validar</button>
                <button type="submit" name="recusar" value="1" class="btn btn-danger">Recusar</button>
            </div>
        </form>
    </div>
</div>
{% endif %}

<script>
$( document ).ready(function() {
	$('input[name*=checkbox_alteracao]').click(function() {
		alert('oi');
	});
});
</script>
    
{% endblock %}
