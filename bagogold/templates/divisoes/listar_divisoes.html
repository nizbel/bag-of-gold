    {% extends "base.html" %}

{% block content %}
<div class="row-fluid">
    <div class="box-content">
    <table id="ordens" class="table table-striped table-bordered bootstrap-datatable datatable">
    <thead>
        <tr>
            <th rowspan="2">Divisão</th>
            <th rowspan="2">Objetivo</th>
            <th rowspan="2">Valor atual</th>
            <th rowspan="2">Saldo</th>
            <th colspan="8">Composição</th>
        </tr>
        <tr>
            <th>B & H</th>
            <th>Trading</th>
            <th>CDB/RDB</th>
            <th>Letra de Créd.</th>
            <th>FII</th>
            <th>Fundo Inv.</th>
            <th>Tes. Direto</th>
            <th>Não alocado</th>
        </tr>
    </thead>
    <tbody>
    {% for divisao in divisoes %}
    <tr>
        <td><a href="{% url 'detalhar_divisao' divisao.id %}">{{divisao.nome}}</a></td>
        <td>R${{divisao.valor_objetivo}}</td>
        <td>R${{divisao.valor_atual|floatformat:"2"}} ({{divisao.quantidade_percentual|floatformat:"2"}}%)</td>
        <td><span style="color:
            {% if divisao.saldo < 0 %}
            red
            {% else %}
            blue
            {% endif %}
            ">R${{divisao.saldo|floatformat:"2"}}</span></td>
        <td><span style="color:
            {% if divisao.saldo_bh < 0 %}
            red
            {% else %}
            blue
            {% endif %}
            ">R${{divisao.saldo_bh|floatformat:"2"}}</span></td>
        <td><span style="color:
            {% if divisao.saldo_trade < 0 %}
            red
            {% else %}
            blue
            {% endif %}
            ">R${{divisao.saldo_trade|floatformat:"2"}}</span></td>
        <td><span style="color:
            {% if divisao.saldo_cdb_rdb < 0 %}
            red
            {% else %}
            blue
            {% endif %}
            ">R${{divisao.saldo_cdb_rdb|floatformat:"2"}}</span></td>
        <td><span style="color:
            {% if divisao.saldo_lc < 0 %}
            red
            {% else %}
            blue
            {% endif %}
            ">R${{divisao.saldo_lc|floatformat:"2"}}</span></td>
        <td><span style="color:
            {% if divisao.saldo_fii < 0 %}
            red
            {% else %}
            blue
            {% endif %}
            ">R${{divisao.saldo_fii|floatformat:"2"}}</span></td>
        <td><span style="color:
            {% if divisao.saldo_fundo_investimento < 0 %}
            red
            {% else %}
            blue
            {% endif %}
            ">R${{divisao.saldo_fundo_investimento|floatformat:"2"}}</span></td>
        <td><span style="color:
            {% if divisao.saldo_td < 0 %}
            red
            {% else %}
            blue
            {% endif %}
            ">R${{divisao.saldo_td}}</span></td>
        <td><span style="color:
            {% if divisao.saldo_nao_alocado < 0 %}
            red
            {% else %}
            blue
            {% endif %}
            ">R${{divisao.saldo_nao_alocado|floatformat:"2"}}</span></td>
    </tr>
    {% endfor %}
    </tbody>
    </table>
    </div>
</div>

<div class="row-fluid">
    <div class="box-content">
    <h3>Operações não alocadas</h3>
    <!-- Botão para alocar automaticamente -->
    <input type="button" class="btn btn-success" value="Inclusão automática" />
    <table id="ordens" class="table table-striped table-bordered bootstrap-datatable datatable">
    <thead>
        <tr>
            <th>Tipo</th>
            <th>Data</th>
            <th>Quantidade não alocada</th>
        </tr>
    </thead>
    <tbody>
    {% for operacao in operacoes_nao_alocadas %}
    <tr>
        <td>{{operacao.tipo}}</td>
        <td>{{operacao.data}}</td>
        <td>{{operacao.quantidade_nao_alocada}}</td>
    </tr>
    {% endfor %}
    </tbody>
    </table>
    </div>
</div>

{% endblock %}
